# images-srv
Image tools microservice:

## Настройки:

```
# .env
DAEMON=yes	# run as daemon
PORT=3333	# tcp/ip port binding

BACK_HOST=http://localhost:3000	# URL бэкенда с аутентификацией

PUBLIC_DIR=/var/www/public	# корневая общедоступная папка
IMAGES_SUB=/images		# подпапка для картинок

IMAGES_SIZES="500x400,400x300"	# размеры нарезанных картинок
```
```
# config/app.rb
set :resources, [ 'models', 'vehicles' ]	# ресурсы для которых будут храниться картинки
```
## Загрузка картинок (role: admin):

POST запросом отправлять форму с action:
```
http://<hostname>/images/<resource>/<id>/upload
```
### Параметры:
```
file: <file> - загружаемый файл.
offsets: "+100+100-100-100" - строка в формате "+x+y-x-y", где 'x' и 'y' - размеры отрезов в пикселях
	по горизонтали и вертикали (передаются только парами), '+' - означает отрезать слева/сверху,
	'-' - справа/снизу.
Пар может быть сколько угодно или вообще не быть (чтоб обрезать со всех 4х сторон достаточно 2х пар).
```
Так же есть простенькая форма для тестов в браузере, доступная через GET запрос:
```
http://<hostname>/images/<resource>/<id>
```

## Список всех картинок на сервере (role: admin):

GET запрос:
```
http://<hostname>/images
```
Вывести список всех картинок с их размерами на сервере в JSON формате.

## Аутентификация/авторизация:

Тайна, покрытая мраком (пока).
